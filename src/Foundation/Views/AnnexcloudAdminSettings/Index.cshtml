@model EPiServer.Reference.Commerce.Site.Features.Annexcloud.ViewModels.CustomerSiteDetailsViewModel

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Admin.cshtml";
}



<style type="text/css">
    body {
        font-family: Arial;
        font-size: 10pt;
    }

    table {
        border: 1px solid #ccc;
        border-collapse: collapse;
        background-color: #fff;
    }

        table th {
            background-color: #B8DBFD;
            color: #333;
            font-weight: bold;
        }

        table th, table td {
            padding: 5px;
            border: 1px solid #ccc;
        }

        table, table table td {
            border: 0px solid #ccc;
        }

    input[type=text], select {
        width: 150px;
    }
</style>

<script>
    $(document).ready(function () {
        $("#Country").change(function () {
            //var rewardid = $(this).find(":selected").val();
            var SelectedCountryname = $(this).find(":selected").html()
            //var selectval = { "couponCode": name }
            $.ajax({
                type: "POST",
                cache: false,
                url: "/AnnexcloudAdminSettings/LoadAnnexCloudSettings",
                //data: { couponCode: name },
                data: { SelectedCountryname: SelectedCountryname },
                success: function (result) {
                    var response = JSON.parse(result);       
                    $("#ac_site_id").val(response[0].siteid);
                    $("#ac_loyalty_access_token").val(response[0].accesstoken); 
                    $("#ac_actionid_create_account").val(response[0].actionid);

                }
            });
        });
    });
</script>


@Html.ValidationSummary()
@using (Html.BeginForm("Index", "AnnexcloudAdminSettings", FormMethod.Post, new { id = "sitedetailsform" }))
{

    <table cellpadding="0" cellspacing="0">
        <tr>
            <th colspan="2" align="center">Loyalty Program</th>
        </tr>
        <tr>
            <td>Select Country: </td>
            <td>
                @Html.DropDownListFor(m => m.Country, new SelectList(ViewBag.Country))
            </td>
        </tr>
        <tr>
            <td>Site ID: </td>
            <td>
                @Html.TextBoxFor(m => m.ac_site_id, new { @Value = ViewBag.siteid })
            </td>
        </tr>
        <tr>
            <td>Access Token: </td>
            <td>
                @Html.TextBoxFor(m => m.ac_loyalty_access_token, new { @Value = ViewBag.accesstoken })
            </td>
        </tr>
        <tr>
            <td>Create an Account Action ID: </td>
            <td>
                @Html.TextBoxFor(m => m.ac_actionid_create_account, new { @Value = ViewBag.actionid })
            </td>
        </tr>
        <tr>
            <td></td>
            <td><input type="submit" value="Submit" /></td>
        </tr>
    </table>

}

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
@if (Model != null)
{
    <script type="text/javascript">
        $(function () {
            alert("Site details Inserted");
        });
    </script>
}

